{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/Arrow.js","src/Vector.js","src/index.js","src/utils.js"],"names":[],"mappings":"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","file":"build.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import Vector from './Vector.js';\r\n\r\nfunction midPointBtw(p1, p2) {\r\n  return {\r\n    x: p1.x + (p2.x - p1.x) / 2,\r\n    y: p1.y + (p2.y - p1.y) / 2\r\n  };\r\n}\r\n\r\n\r\nclass Arrow{\r\n    constructor(){\r\n        this.prevPos = new Vector(0,0);\r\n        this.pos = new Vector(mouseX,mouseY);\r\n        this.dir = new Vector(0,0);\r\n        this.length = new Vector(50,50);\r\n        this.origin = new Vector(mouseX,mouseY);\r\n        this.width = 50;\r\n        this.posta = 0;\r\n        this.rot = 0;\r\n        this.painting = false;\r\n        this.points = [];\r\n        this.bindEvents();\r\n    }\r\n    update(){\r\n        \r\n            this.origin = new Vector(this.pos.x,this.pos.y);\r\n            this.dir = new Vector(mouseX,mouseY);\r\n            this.dir.sub(this.origin).normalize();\r\n            this.pos = new Vector(mouseX,mouseY);\r\n            this.rot = this.getRot();\r\n            this.posta = this.dir.add(this.pos);\r\n        \r\n    }\r\n    display(){\r\n        var self = this;\r\n        // self.peine();\r\n        \r\n        ctx.strokeStyle = 'white';\r\n        ctx.lineWidth = \"1px\";\r\n        for(var i = -50; i <= 50; i+=25){\r\n            var delta = 0 + i;\r\n            var gamma = 0;\r\n            var delta2 = 0 + i*1.2;\r\n            var gamma2 = 0;\r\n\r\n            ctx.beginPath();\r\n            ctx.moveTo(self.points[0].x,self.points[0].y + i);\r\n            this.points.forEach((p)=>{\r\n                gamma = Math.sin(delta * Math.PI/180) * 0.5;\r\n                delta += 1;\r\n                // gamma2 = Math.sin(delta * Math.PI/180) * 0.8;\r\n                // delta2 += 1.5;\r\n                var r = (gamma+gamma2)/2;\r\n                ctx.save();\r\n                ctx.translate(p.x,p.y);\r\n                ctx.rotate(p.r);\r\n                ctx.lineTo(0,i*gamma);\r\n                ctx.restore();\r\n            });\r\n            ctx.stroke();\r\n            \r\n        }\r\n    }\r\n    bindEvents(){\r\n        var self = this;\r\n        window.addEventListener('mousedown',(e)=>{\r\n            self.update();\r\n            self.painting = !self.painting;\r\n            self.points = [];\r\n            self.points.push({\r\n                x:e.clientX,\r\n                y:e.clientY,\r\n                r:self.rot\r\n            });\r\n        });\r\n        window.addEventListener('mousemove',(e)=>{\r\n            self.update();\r\n            if(self.painting) self.points.push({\r\n                x:e.clientX,\r\n                y:e.clientY,\r\n                r:self.rot\r\n            });\r\n        });\r\n        window.addEventListener('mouseup',(e)=>{\r\n            // self.painting = false;\r\n            self.points = [{x:e.clientX,y:e.clientY,r:self.rot}];\r\n        });\r\n    }\r\n    getRot(){\r\n        if(!this.dir.mag()) return this.rot;\r\n        var r =  Math.atan2(this.dir.y,this.dir.x);\r\n        // console.log('x: ' + this.dir.x + 'y: ' + this.dir.y + ' | mag(): '+this.dir.mag() + ' | rot: '+r)\r\n        return r;\r\n    }\r\n    peine(){\r\n        \r\n        ctx.save();\r\n        ctx.translate(this.pos.x,this.pos.y);\r\n        ctx.rotate(this.rot);\r\n        ctx.strokeStyle = \"red\";\r\n        ctx.strokeRect(0,-50,2,100);\r\n        ctx.strokeStyle = 'white';\r\n        for(var i = -40; i <= 40; i+=10){\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.moveTo(0,i);\r\n            ctx.lineTo(-50,i);\r\n            ctx.stroke();\r\n            ctx.restore();\r\n        }\r\n        ctx.restore();\r\n    }\r\n}\r\nexport default Arrow; ","class Vector{\r\n    constructor(x,y){\r\n        this.x = x;\r\n        this.y = y;\r\n\r\n        return this;\r\n    }\r\n    add(vector){\r\n        this.x += vector.x;\r\n        this.y += vector.y;\r\n        return this;\r\n    }\r\n    sub(vector){\r\n        this.x -= vector.x;\r\n        this.y -= vector.y;\r\n        return this;\r\n    }\r\n    mag(){\r\n      return Math.sqrt(this.x*this.x + this.y*this.y);\r\n    }\r\n    mult(num){\r\n        this.x *= num;\r\n        this.y *= num;\r\n        return this;\r\n    }\r\n    clone(){\r\n        return new Vector(this.x,this.y);\r\n    }\r\n    div(num){\r\n        this.x = this.x/num;\r\n        this.y = this.y/num;\r\n        return this;\r\n    }\r\n    normalize(){\r\n        var m = this.mag();\r\n        if(m === 0) return this;\r\n        this.x = this.x/m;\r\n        this.y = this.y/m;\r\n        return this;\r\n    }\r\n}\r\n\r\nexport default Vector;","// GLOBALS\r\nwindow.frameCount = 0;\r\nimport './utils.js';\r\nimport Arrow from './Arrow.js';\r\n\r\nvar reqId, arrow = new Arrow();\r\n\r\nfunction setup(){\r\n    loop();\r\n    ctx.lineJoin = ctx.lineCap = 'round';\r\n}\r\nfunction update(){\r\n    ++frameCount;\r\n    // arrow.update();\r\n}\r\nfunction render(){\r\n    ctx.fillStyle=\"rgba(0,0,0,.25)\";\r\n    ctx.fillRect(0,0,width,height);\r\n    // ctx.clearRect(0,0,width,height);\r\n    if(arrow.painting) arrow.display();\r\n}\r\n\r\nfunction loop(){\r\n    reqId = requestAnimationFrame(loop);\r\n    update();\r\n    render();\r\n}\r\nsetup();\r\n\r\n","window.canvas = document.getElementById('canvas');\r\nwindow.ctx = canvas.getContext('2d');\r\n\r\nwindow.onresize = function(){\r\n    canvas.width = window.width = window.innerWidth;\r\n    canvas.height = window.height = window.innerHeight;\r\n};\r\nwindow.onresize();\r\n\r\nwindow.cont = 0.0;\r\n\r\nwindow.rad = function(deg){\r\n    return deg * Math.PI/180;\r\n};\r\n\r\nwindow.mouseX = 0;\r\nwindow.mouseY = 0;\r\nwindow.onmousemove = function(event){\r\n    mouseX = event.clientX;\r\n    mouseY = event.clientY;\r\n};\r\nwindow.map = function(a,b,c,d,f){ return d+(f-d)*((a-b)/(c-b));};\r\nwindow.random = function(min,max){ return map(Math.random(),0,1,min,max);};\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXEFycm93LmpzIiwic3JjXFxWZWN0b3IuanMiLCJzcmNcXGluZGV4LmpzIiwic3JjXFx1dGlscy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7O0FBRUEsU0FBUyxXQUFULENBQXFCLEVBQXJCLEVBQXlCLEVBQXpCLEVBQTZCO0FBQzNCLFdBQU87QUFDTCxXQUFHLEdBQUcsQ0FBSCxHQUFPLENBQUMsR0FBRyxDQUFILEdBQU8sR0FBRyxDQUFYLElBQWdCLENBRHJCO0FBRUwsV0FBRyxHQUFHLENBQUgsR0FBTyxDQUFDLEdBQUcsQ0FBSCxHQUFPLEdBQUcsQ0FBWCxJQUFnQjtBQUZyQixLQUFQO0FBSUQ7O0lBR0ssSztBQUNGLHFCQUFhO0FBQUE7O0FBQ1QsYUFBSyxPQUFMLEdBQWUscUJBQVcsQ0FBWCxFQUFhLENBQWIsQ0FBZjtBQUNBLGFBQUssR0FBTCxHQUFXLHFCQUFXLE1BQVgsRUFBa0IsTUFBbEIsQ0FBWDtBQUNBLGFBQUssR0FBTCxHQUFXLHFCQUFXLENBQVgsRUFBYSxDQUFiLENBQVg7QUFDQSxhQUFLLE1BQUwsR0FBYyxxQkFBVyxFQUFYLEVBQWMsRUFBZCxDQUFkO0FBQ0EsYUFBSyxNQUFMLEdBQWMscUJBQVcsTUFBWCxFQUFrQixNQUFsQixDQUFkO0FBQ0EsYUFBSyxLQUFMLEdBQWEsRUFBYjtBQUNBLGFBQUssS0FBTCxHQUFhLENBQWI7QUFDQSxhQUFLLEdBQUwsR0FBVyxDQUFYO0FBQ0EsYUFBSyxRQUFMLEdBQWdCLEtBQWhCO0FBQ0EsYUFBSyxNQUFMLEdBQWMsRUFBZDtBQUNBLGFBQUssVUFBTDtBQUNIOzs7O2lDQUNPOztBQUVBLGlCQUFLLE1BQUwsR0FBYyxxQkFBVyxLQUFLLEdBQUwsQ0FBUyxDQUFwQixFQUFzQixLQUFLLEdBQUwsQ0FBUyxDQUEvQixDQUFkO0FBQ0EsaUJBQUssR0FBTCxHQUFXLHFCQUFX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ZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IFZlY3RvciBmcm9tICcuL1ZlY3Rvci5qcyc7XHJcblxyXG5mdW5jdGlvbiBtaWRQb2ludEJ0dyhwMSwgcDIpIHtcclxuICByZXR1cm4ge1xyXG4gICAgeDogcDEueCArIChwMi54IC0gcDEueCkgLyAyLFxyXG4gICAgeTogcDEueSArIChwMi55IC0gcDEueSkgLyAyXHJcbiAgfTtcclxufVxyXG5cclxuXHJcbmNsYXNzIEFycm93e1xyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICB0aGlzLnByZXZQb3MgPSBuZXcgVmVjdG9yKDAsMCk7XHJcbiAgICAgICAgdGhpcy5wb3MgPSBuZXcgVmVjdG9yKG1vdXNlWCxtb3VzZVkpO1xyXG4gICAgICAgIHRoaXMuZGlyID0gbmV3IFZlY3RvcigwLDApO1xyXG4gICAgICAgIHRoaXMubGVuZ3RoID0gbmV3IFZlY3Rvcig1MCw1MCk7XHJcbiAgICAgICAgdGhpcy5vcmlnaW4gPSBuZXcgVmVjdG9yKG1vdXNlWCxtb3VzZVkpO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSA1MDtcclxuICAgICAgICB0aGlzLnBvc3RhID0gMDtcclxuICAgICAgICB0aGlzLnJvdCA9IDA7XHJcbiAgICAgICAgdGhpcy5wYWludGluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucG9pbnRzID0gW107XHJcbiAgICAgICAgdGhpcy5iaW5kRXZlbnRzKCk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoKXtcclxuICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5vcmlnaW4gPSBuZXcgVmVjdG9yKHRoaXMucG9zLngsdGhpcy5wb3MueSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGlyID0gbmV3IFZlY3Rvcihtb3VzZVgsbW91c2VZKTtcclxuICAgICAgICAgICAgdGhpcy5kaXIuc3ViKHRoaXMub3JpZ2luKS5ub3JtYWxpemUoKTtcclxuICAgICAgICAgICAgdGhpcy5wb3MgPSBuZXcgVmVjdG9yKG1vdXNlWCxtb3VzZVkpO1xyXG4gICAgICAgICAgICB0aGlzLnJvdCA9IHRoaXMuZ2V0Um90KCk7XHJcbiAgICAgICAgICAgIHRoaXMucG9zdGEgPSB0aGlzLmRpci5hZGQodGhpcy5wb3MpO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG4gICAgZGlzcGxheSgpe1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAvLyBzZWxmLnBlaW5lKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJ3doaXRlJztcclxuICAgICAgICBjdHgubGluZVdpZHRoID0gXCIxcHhcIjtcclxuICAgICAgICBmb3IodmFyIGkgPSAtNTA7IGkgPD0gNTA7IGkrPTI1KXtcclxuICAgICAgICAgICAgdmFyIGRlbHRhID0gMCArIGk7XHJcbiAgICAgICAgICAgIHZhciBnYW1tYSA9IDA7XHJcbiAgICAgICAgICAgIHZhciBkZWx0YTIgPSAwICsgaSoxLjI7XHJcbiAgICAgICAgICAgIHZhciBnYW1tYTIgPSAwO1xyXG5cclxuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICBjdHgubW92ZVRvKHNlbGYucG9pbnRzWzBdLngsc2VsZi5wb2ludHNbMF0ueSArIGkpO1xyXG4gICAgICAgICAgICB0aGlzLnBvaW50cy5mb3JFYWNoKChwKT0+e1xyXG4gICAgICAgICAgICAgICAgZ2FtbWEgPSBNYXRoLnNpbihkZWx0YSAqIE1hdGguUEkvMTgwKSAqIDAuNTtcclxuICAgICAgICAgICAgICAgIGRlbHRhICs9IDE7XHJcbiAgICAgICAgICAgICAgICAvLyBnYW1tYTIgPSBNYXRoLnNpbihkZWx0YSAqIE1hdGguUEkvMTgwKSAqIDAuODtcclxuICAgICAgICAgICAgICAgIC8vIGRlbHRhMiArPSAxLjU7XHJcbiAgICAgICAgICAgICAgICB2YXIgciA9IChnYW1tYStnYW1tYTIpLzI7XHJcbiAgICAgICAgICAgICAgICBjdHguc2F2ZSgpO1xyXG4gICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShwLngscC55KTtcclxuICAgICAgICAgICAgICAgIGN0eC5yb3RhdGUocC5yKTtcclxuICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oMCxpKmdhbW1hKTtcclxuICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGJpbmRFdmVudHMoKXtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsKGUpPT57XHJcbiAgICAgICAgICAgIHNlbGYudXBkYXRlKCk7XHJcbiAgICAgICAgICAgIHNlbGYucGFpbnRpbmcgPSAhc2VsZi5wYWludGluZztcclxuICAgICAgICAgICAgc2VsZi5wb2ludHMgPSBbXTtcclxuICAgICAgICAgICAgc2VsZi5wb2ludHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB4OmUuY2xpZW50WCxcclxuICAgICAgICAgICAgICAgIHk6ZS5jbGllbnRZLFxyXG4gICAgICAgICAgICAgICAgcjpzZWxmLnJvdFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywoZSk9PntcclxuICAgICAgICAgICAgc2VsZi51cGRhdGUoKTtcclxuICAgICAgICAgICAgaWYoc2VsZi5wYWludGluZykgc2VsZi5wb2ludHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB4OmUuY2xpZW50WCxcclxuICAgICAgICAgICAgICAgIHk6ZS5jbGllbnRZLFxyXG4gICAgICAgICAgICAgICAgcjpzZWxmLnJvdFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsKGUpPT57XHJcbiAgICAgICAgICAgIC8vIHNlbGYucGFpbnRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgc2VsZi5wb2ludHMgPSBbe3g6ZS5jbGllbnRYLHk6ZS5jbGllbnRZLHI6c2VsZi5yb3R9XTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGdldFJvdCgpe1xyXG4gICAgICAgIGlmKCF0aGlzLmRpci5tYWcoKSkgcmV0dXJuIHRoaXMucm90O1xyXG4gICAgICAgIHZhciByID0gIE1hdGguYXRhbjIodGhpcy5kaXIueSx0aGlzLmRpci54KTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygneDogJyArIHRoaXMuZGlyLnggKyAneTogJyArIHRoaXMuZGlyLnkgKyAnIHwgbWFnKCk6ICcrdGhpcy5kaXIubWFnKCkgKyAnIHwgcm90OiAnK3IpXHJcbiAgICAgICAgcmV0dXJuIHI7XHJcbiAgICB9XHJcbiAgICBwZWluZSgpe1xyXG4gICAgICAgIFxyXG4gICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgY3R4LnRyYW5zbGF0ZSh0aGlzLnBvcy54LHRoaXMucG9zLnkpO1xyXG4gICAgICAgIGN0eC5yb3RhdGUodGhpcy5yb3QpO1xyXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IFwicmVkXCI7XHJcbiAgICAgICAgY3R4LnN0cm9rZVJlY3QoMCwtNTAsMiwxMDApO1xyXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICd3aGl0ZSc7XHJcbiAgICAgICAgZm9yKHZhciBpID0gLTQwOyBpIDw9IDQwOyBpKz0xMCl7XHJcbiAgICAgICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgY3R4Lm1vdmVUbygwLGkpO1xyXG4gICAgICAgICAgICBjdHgubGluZVRvKC01MCxpKTtcclxuICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IEFycm93OyAiLCJjbGFzcyBWZWN0b3J7XHJcbiAgICBjb25zdHJ1Y3Rvcih4LHkpe1xyXG4gICAgICAgIHRoaXMueCA9IHg7XHJcbiAgICAgICAgdGhpcy55ID0geTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBhZGQodmVjdG9yKXtcclxuICAgICAgICB0aGlzLnggKz0gdmVjdG9yLng7XHJcbiAgICAgICAgdGhpcy55ICs9IHZlY3Rvci55O1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc3ViKHZlY3Rvcil7XHJcbiAgICAgICAgdGhpcy54IC09IHZlY3Rvci54O1xyXG4gICAgICAgIHRoaXMueSAtPSB2ZWN0b3IueTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIG1hZygpe1xyXG4gICAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCp0aGlzLnggKyB0aGlzLnkqdGhpcy55KTtcclxuICAgIH1cclxuICAgIG11bHQobnVtKXtcclxuICAgICAgICB0aGlzLnggKj0gbnVtO1xyXG4gICAgICAgIHRoaXMueSAqPSBudW07XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBjbG9uZSgpe1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKHRoaXMueCx0aGlzLnkpO1xyXG4gICAgfVxyXG4gICAgZGl2KG51bSl7XHJcbiAgICAgICAgdGhpcy54ID0gdGhpcy54L251bTtcclxuICAgICAgICB0aGlzLnkgPSB0aGlzLnkvbnVtO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgbm9ybWFsaXplKCl7XHJcbiAgICAgICAgdmFyIG0gPSB0aGlzLm1hZygpO1xyXG4gICAgICAgIGlmKG0gPT09IDApIHJldHVybiB0aGlzO1xyXG4gICAgICAgIHRoaXMueCA9IHRoaXMueC9tO1xyXG4gICAgICAgIHRoaXMueSA9IHRoaXMueS9tO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBWZWN0b3I7IiwiLy8gR0xPQkFMU1xyXG53aW5kb3cuZnJhbWVDb3VudCA9IDA7XHJcbmltcG9ydCAnLi91dGlscy5qcyc7XHJcbmltcG9ydCBBcnJvdyBmcm9tICcuL0Fycm93LmpzJztcclxuXHJcbnZhciByZXFJZCwgYXJyb3cgPSBuZXcgQXJyb3coKTtcclxuXHJcbmZ1bmN0aW9uIHNldHVwKCl7XHJcbiAgICBsb29wKCk7XHJcbiAgICBjdHgubGluZUpvaW4gPSBjdHgubGluZUNhcCA9ICdyb3VuZCc7XHJcbn1cclxuZnVuY3Rpb24gdXBkYXRlKCl7XHJcbiAgICArK2ZyYW1lQ291bnQ7XHJcbiAgICAvLyBhcnJvdy51cGRhdGUoKTtcclxufVxyXG5mdW5jdGlvbiByZW5kZXIoKXtcclxuICAgIGN0eC5maWxsU3R5bGU9XCJyZ2JhKDAsMCwwLC4yNSlcIjtcclxuICAgIGN0eC5maWxsUmVjdCgwLDAsd2lkdGgsaGVpZ2h0KTtcclxuICAgIC8vIGN0eC5jbGVhclJlY3QoMCwwLHdpZHRoLGhlaWdodCk7XHJcbiAgICBpZihhcnJvdy5wYWludGluZykgYXJyb3cuZGlzcGxheSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsb29wKCl7XHJcbiAgICByZXFJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKTtcclxuICAgIHVwZGF0ZSgpO1xyXG4gICAgcmVuZGVyKCk7XHJcbn1cclxuc2V0dXAoKTtcclxuXHJcbiIsIndpbmRvdy5jYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzJyk7XHJcbndpbmRvdy5jdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHJcbndpbmRvdy5vbnJlc2l6ZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICBjYW52YXMud2lkdGggPSB3aW5kb3cud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgIGNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG59O1xyXG53aW5kb3cub25yZXNpemUoKTtcclxuXHJcbndpbmRvdy5jb250ID0gMC4wO1xyXG5cclxud2luZG93LnJhZCA9IGZ1bmN0aW9uKGRlZyl7XHJcbiAgICByZXR1cm4gZGVnICogTWF0aC5QSS8xODA7XHJcbn07XHJcblxyXG53aW5kb3cubW91c2VYID0gMDtcclxud2luZG93Lm1vdXNlWSA9IDA7XHJcbndpbmRvdy5vbm1vdXNlbW92ZSA9IGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgIG1vdXNlWCA9IGV2ZW50LmNsaWVudFg7XHJcbiAgICBtb3VzZVkgPSBldmVudC5jbGllbnRZO1xyXG59O1xyXG53aW5kb3cubWFwID0gZnVuY3Rpb24oYSxiLGMsZCxmKXsgcmV0dXJuIGQrKGYtZCkqKChhLWIpLyhjLWIpKTt9O1xyXG53aW5kb3cucmFuZG9tID0gZnVuY3Rpb24obWluLG1heCl7IHJldHVybiBtYXAoTWF0aC5yYW5kb20oKSwwLDEsbWluLG1heCk7fTtcclxuIl19"}