{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/LineParticle.js","src/Particle.js","src/ParticleSystem.js","src/PointParticle.js","src/SmokeParticle.js","src/index.js","src/utils.js"],"names":[],"mappings":"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","file":"build.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import Particle from './Particle.js';\r\nclass LineParticle extends Particle{\r\n    constructor(o){\r\n        super(o);\r\n        this.mass = 0.5;\r\n    }\r\n    display(){\r\n        var white = map(this.lifespan,0,50,0,1);\r\n        ctx.save();\r\n        ctx.translate(this.x-this.r/2,this.y-this.r/2);\r\n        ctx.beginPath();\r\n        ctx.strokeStyle = \"rgba(255,255,255,\"+white+\")\";\r\n        ctx.moveTo(0, 0);\r\n        ctx.lineTo(random(-10,10),random(-10,10));\r\n        // ctx.strokeRect(0,0,this.r,this.r);\r\n        ctx.stroke();\r\n        ctx.restore();\r\n    }\r\n}\r\nmodule.exports = LineParticle;","class Particle{\r\n    constructor(o){\r\n        this.location = o.location;\r\n        this.velocity = o.velocity;\r\n        this.acceleration = o.acceleration;\r\n        this.mass = o.mass;\r\n        this.r = o.radius;\r\n        this.lifespan = 100;\r\n        this.cont = 5;\r\n        this.delta = Math.random();\r\n        this.theta = Math.random();\r\n        this.gamma = Math.random();\r\n    }\r\n    update(){\r\n        \r\n        /* Update data */\r\n        this.cont += Math.random();\r\n        this.delta += this.cont;\r\n        this.theta = Math.sin(rad(this.delta));\r\n        this.gamma = Math.cos(rad(this.delta));\r\n        this.lifespan -= 0.2;\r\n        \r\n        /* Apply forces */\r\n        this.applyForce(wind);\r\n        this.applyForce(new Vector(0,gravity.x*this.mass));\r\n        // this.applyEdgeForces(); NO FUNCA!\r\n\r\n        /* Update location and reset values*/\r\n        this.velocity.add(this.acceleration);\r\n        // this.velocity.mult(0.5);\r\n        // this.checkEdges();\r\n        this.location.add(this.velocity);\r\n        this.acceleration.mult(0);\r\n    }\r\n    display(){\r\n        ctx.beginPath();\r\n        ctx.fillStyle = 'rgba(255,255,255,0.5)';\r\n        ctx.arc(this.x,this.y,this.r,0,Math.PI*2);\r\n        ctx.fill();\r\n    }\r\n    checkEdges(){\r\n        if( this.location.x > width){\r\n            this.location.x = width;\r\n            this.velocity.x *= -1;\r\n        }\r\n        if(this.location.y >= height){\r\n            this.location.y = height;\r\n            this.velocity.y *= -1;\r\n        }\r\n    }\r\n    applyEdgeForces(){\r\n        this.applyForce(edgess[0].clone().div(this.location.y));\r\n        this.applyForce(edgess[1].clone().div(width - this.location.x));\r\n        this.applyForce(edgess[2].clone().div(height - this.location.y));\r\n        this.applyForce(edgess[3].clone().div(this.location.x));\r\n    }\r\n    isDead(){\r\n        return (this.lifespan <= 0);\r\n    }\r\n    run(){\r\n        this.update();\r\n        this.display();\r\n    }\r\n    applyForce(force){\r\n        force = new Vector(force.x,force.y).div(this.mass);\r\n        this.acceleration.add(force);\r\n    }\r\n    remove(){\r\n        delete this;\r\n    }\r\n    get x(){\r\n        return this.location.x;\r\n    }\r\n    get y(){\r\n        return this.location.y;\r\n    }\r\n}\r\nmodule.exports = Particle;","import Particle from './Particle.js';\r\nimport SmokeParticle from './SmokeParticle.js';\r\nimport LineParticle from './LineParticle.js';\r\nimport PointPartice from './PointParticle.js';\r\n\r\nclass ParticleSystem{\r\n    constructor(origin,maxAmount,type){\r\n        this.particles = [];\r\n        this.origin = origin;\r\n        this.flag = true;\r\n        this.maxAmount = maxAmount || 10;\r\n        this.velocity = new Vector(1,1);\r\n        this.acceleration = new Vector(0,0);\r\n        this.cont = 5;\r\n        this.delta = 0.0;\r\n        this.theta = 0.0;\r\n        this.gamma = 0.0;\r\n        this.type = type;\r\n        this.particleTypes = {\r\n            'point':PointPartice,\r\n            'line': LineParticle,\r\n            'smoke':SmokeParticle\r\n        };\r\n        this.run();\r\n    }\r\n    run(){\r\n        this.update();\r\n        this.display();\r\n    }\r\n    update(){\r\n        // this.delta += this.cont;\r\n        // this.theta = Math.sin(rad(this.delta));\r\n        // this.gamma = Math.cos(rad(this.delta));\r\n        // this.acceleration = new Vector(this.gamma,this.theta);\r\n        // this.velocity.add(this.acceleration);\r\n        // this.origin.add(this.velocity);\r\n        // this.velocity.mult(0);\r\n        if(this.particles.length <= this.maxAmount && this.flag){\r\n            this.particles.push(new this.particleTypes[this.type]({\r\n                location: this.origin.clone(),\r\n                velocity:  new Vector(map(Math.random(),0,1,-1,1),-0.01),\r\n                acceleration:  new Vector(map(Math.random(),0,1,-0.02,0.01),-0.01),\r\n                radius: Math.floor(map(Math.random(),0,1,20,50))\r\n            }));\r\n        }else{\r\n            this.flag = false;\r\n        }\r\n        this.particles.forEach((p,i)=>{\r\n            if(p.isDead()){\r\n                p.remove();\r\n                this.particles.splice(i,1);\r\n            }\r\n        });\r\n    }\r\n    display(){\r\n        this.particles.forEach((p,i)=>{\r\n            p.run();\r\n        });\r\n    }\r\n    remove(){\r\n        delete this;\r\n    }\r\n}\r\n\r\nmodule.exports = ParticleSystem;","import Particle from './Particle.js';\r\nclass PointParticle extends Particle{\r\n    constructor(o){\r\n        super(o);\r\n        this.mass = 10;\r\n    }\r\n    display(){\r\n        ctx.save();\r\n        ctx.fillStyle = \"white\";\r\n        ctx.beginPath();\r\n        ctx.arc(this.x,this.y,10,0,Math.PI*2);\r\n        ctx.fill();\r\n        ctx.restore();\r\n    }\r\n}\r\nmodule.exports = PointParticle;\r\n","import Particle from './Particle.js';\r\nclass SmokeParticle extends Particle{\r\n    constructor(o){\r\n        super(o);\r\n        let self = this;\r\n        this.imgLoaded = false;\r\n        this.sprite = new Image();\r\n        this.sprite.onload = function(){\r\n            self.imgLoaded = true;\r\n        };\r\n        this.sprite.src = 'img/smoke_256.png';\r\n    }\r\n    display(){\r\n        if(!this.imgLoaded) return;\r\n        ctx.save();\r\n        ctx.translate(this.x-this.r/2,this.y-this.r/2);\r\n        ctx.rotate((frameCount*0.001)*Math.PI/180);\r\n        ctx.globalAlpha = map(this.lifespan,0,100,0,1);\r\n        ctx.drawImage(this.sprite,0,0,this.r,this.r);\r\n        ctx.restore();\r\n    }\r\n}\r\nmodule.exports = SmokeParticle;","// GLOBALS\r\nwindow.frameCount = 0;\r\n\r\nimport ParticleSystem from './ParticleSystem.js';\r\nimport './utils.js';\r\n\r\nvar reqId;\r\nvar img = new Image();\r\n    img.onload = function(){\r\n\r\n    };\r\n    img.src = 'img/smoke_256.png';\r\nfunction setup(){\r\n    // ctx.globalCompositeBlending = 'screen';\r\n    loop();\r\n}\r\nfunction update(){\r\n    ++frameCount;\r\n}\r\nfunction render(){\r\n    ctx.clearRect(0,0,width,height);\r\n    ctx.drawImage(img,mouseX,mouseY,30,30);\r\n}\r\n\r\nvar lastCalledFrame, fps, delta;\r\nvar fpsHTML = document.getElementById(\"fps\");\r\nfunction loop(){\r\n    reqId = requestAnimationFrame(loop);\r\n    update();\r\n    render();\r\n    if(!lastCalledFrame){\r\n        lastCalledFrame = Date.now();\r\n        fps = 0;\r\n        return;\r\n    }\r\n    delta = (Date.now()-lastCalledFrame)/1000;\r\n    fps = 1/delta | 0;\r\n    lastCalledFrame = Date.now();\r\n    if(frameCount % 24 === 0)fpsHTML.innerHTML = fps;\r\n}\r\nsetup();\r\n\r\n","class Vector{\r\n    constructor(x,y){\r\n        this.x = x;\r\n        this.y = y;\r\n\r\n        return this;\r\n    }\r\n    add(vector){\r\n        this.x += vector.x;\r\n        this.y += vector.y;\r\n        return this;\r\n    }\r\n    sub(vector){\r\n        this.x -= vector.x;\r\n        this.y -= vector.y;\r\n        return this;\r\n    }\r\n    mag(){\r\n      return Math.sqrt(this.x*this.x + this.y*this.y);\r\n    }\r\n    mult(num){\r\n        this.x *= num;\r\n        this.y *= num;\r\n        return this;\r\n    }\r\n    clone(){\r\n        return new Vector(this.x,this.y);\r\n    }\r\n    div(num){\r\n        this.x = this.x/num;\r\n        this.y = this.y/num;\r\n        return this;\r\n    }\r\n}\r\n\r\nwindow.Vector = Vector;\r\nwindow.canvas = document.getElementById('canvas');\r\nwindow.ctx = canvas.getContext('2d');\r\n\r\nwindow.onresize = function(){\r\n    canvas.width = window.width = window.innerWidth;\r\n    canvas.height = window.height = window.innerHeight;\r\n};\r\nwindow.onresize();\r\n\r\nwindow.cont = 0.0;\r\n\r\nwindow.rad = function(deg){\r\n    return deg * Math.PI/180;\r\n};\r\n\r\nwindow.mouseX = 0;\r\nwindow.mouseY = 0;\r\nwindow.onmousemove = function(event){\r\n    mouseX = event.clientX;\r\n    mouseY = event.clientY;\r\n};\r\nwindow.map = function(a,b,c,d,f){return d+(f-d)*((a-b)/(c-b))};\r\n\r\nwindow.random = function(min,max){\r\n    return map(Math.random(),0,1,min,max);\r\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXExpbmVQYXJ0aWNsZS5qcyIsInNyY1xcUGFydGljbGUuanMiLCJzcmNcXFBhcnRpY2xlU3lzdGVtLmpzIiwic3JjXFxQb2ludFBhcnRpY2xlLmpzIiwic3JjXFxTbW9rZVBhcnRpY2xlLmpzIiwic3JjXFxpbmRleC5qcyIsInNyY1xcdXRpbHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7O0FDQUE7Ozs7Ozs7Ozs7OztJQUNNLFk7OztBQUNGLDBCQUFZLENBQVosRUFBYztBQUFBOztBQUFBLGdJQUNKLENBREk7O0FBRVYsY0FBSyxJQUFMLEdBQVksR0FBWjtBQUZVO0FBR2I7Ozs7a0NBQ1E7QUFDTCxnQkFBSSxRQUFRLElBQUksS0FBSyxRQUFULEVBQWtCLENBQWxCLEVBQW9CLEVBQXBCLEVBQXVCLENBQXZCLEVBQXlCLENBQXpCLENBQVo7QUFDQSxnQkFBSSxJQUFKO0FBQ0EsZ0JBQUksU0FBSixDQUFjLEtBQUssQ0FBTCxHQUFPLEtBQUssQ0FBTCxHQUFPLENBQTVCLEVBQThCLEtBQUssQ0FBTCxHQUFPLEtBQUssQ0FBTCxHQUFPLENBQTVDO0FBQ0EsZ0JBQUksU0FBSjtBQUNBLGdCQUFJLFdBQUosR0FBa0Isc0JBQW9CLEtBQXBCLEdBQTBCLEdBQTVDO0FBQ0EsZ0JBQUksTUFBSixDQUFXLENBQVgsRUFBYyxDQUFkO0FBQ0EsZ0JBQUksTUFBSixDQUFXLE9BQU8sQ0FBQyxFQUFSLEVBQVcsRUFBWCxDQUFYLEVBQTBCLE9BQU8sQ0FBQyxFQUFSLEVBQVcsRUFBWCxDQUExQjtBQUNBO0FBQ0EsZ0JBQUksTUFBSjtBQUNBLGdCQUFJLE9BQUo7QUFDSDs7Ozs7O0FBRUwsT0FBTyxPQUFQLEdBQWlCLFlBQWpCOzs7Ozs7Ozs7SUNuQk0sUTtBQUNGLHNCQUFZLENBQVosRUFBYztBQUFBOztBQUNWLGFBQUssUUFBTCxHQUFnQixFQUFFLFFBQWxCO0FBQ0EsYUFB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QUFDeEIsV0FBTyxLQUFQLEdBQWUsT0FBTyxLQUFQLEdBQWUsT0FBTyxVQUFyQztBQUNBLFdBQU8sTUFBUCxHQUFnQixPQUFPLE1BQVAsR0FBZ0IsT0FBTyxXQUF2QztBQUNILENBSEQ7QUFJQSxPQUFPLFFBQVA7O0FBRUEsT0FBTyxJQUFQLEdBQWMsR0FBZDs7QUFFQSxPQUFPLEdBQVAsR0FBYSxVQUFTLEdBQVQsRUFBYTtBQUN0QixXQUFPLE1BQU0sS0FBSyxFQUFYLEdBQWMsR0FBckI7QUFDSCxDQUZEOztBQUlBLE9BQU8sTUFBUCxHQUFnQixDQUFoQjtBQUNBLE9BQU8sTUFBUCxHQUFnQixDQUFoQjtBQUNBLE9BQU8sV0FBUCxHQUFxQixVQUFTLEtBQVQsRUFBZTtBQUNoQyxhQUFTLE1BQU0sT0FBZjtBQUNBLGFBQVMsTUFBTSxPQUFmO0FBQ0gsQ0FIRDtBQUlBLE9BQU8sR0FBUCxHQUFhLFVBQVMsQ0FBVCxFQUFXLENBQVgsRUFBYSxDQUFiLEVBQWUsQ0FBZixFQUFpQixDQUFqQixFQUFtQjtBQUFDLFdBQU8sSUFBRSxDQUFDLElBQUUsQ0FBSCxLQUFPLENBQUMsSUFBRSxDQUFILEtBQU8sSUFBRSxDQUFULENBQVAsQ0FBVDtBQUE2QixDQUE5RDs7QUFFQSxPQUFPLE1BQVAsR0FBZ0IsVUFBUyxHQUFULEVBQWEsR0FBYixFQUFpQjtBQUM3QixXQUFPLElBQUksS0FBSyxNQUFMLEVBQUosRUFBa0IsQ0FBbEIsRUFBb0IsQ0FBcEIsRUFBc0IsR0FBdEIsRUFBMEIsR0FBMUIsQ0FBUDtBQUNILENBRkQiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IFBhcnRpY2xlIGZyb20gJy4vUGFydGljbGUuanMnO1xyXG5jbGFzcyBMaW5lUGFydGljbGUgZXh0ZW5kcyBQYXJ0aWNsZXtcclxuICAgIGNvbnN0cnVjdG9yKG8pe1xyXG4gICAgICAgIHN1cGVyKG8pO1xyXG4gICAgICAgIHRoaXMubWFzcyA9IDAuNTtcclxuICAgIH1cclxuICAgIGRpc3BsYXkoKXtcclxuICAgICAgICB2YXIgd2hpdGUgPSBtYXAodGhpcy5saWZlc3BhbiwwLDUwLDAsMSk7XHJcbiAgICAgICAgY3R4LnNhdmUoKTtcclxuICAgICAgICBjdHgudHJhbnNsYXRlKHRoaXMueC10aGlzLnIvMix0aGlzLnktdGhpcy5yLzIpO1xyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBcInJnYmEoMjU1LDI1NSwyNTUsXCIrd2hpdGUrXCIpXCI7XHJcbiAgICAgICAgY3R4Lm1vdmVUbygwLCAwKTtcclxuICAgICAgICBjdHgubGluZVRvKHJhbmRvbSgtMTAsMTApLHJhbmRvbSgtMTAsMTApKTtcclxuICAgICAgICAvLyBjdHguc3Ryb2tlUmVjdCgwLDAsdGhpcy5yLHRoaXMucik7XHJcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICB9XHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSBMaW5lUGFydGljbGU7IiwiY2xhc3MgUGFydGljbGV7XHJcbiAgICBjb25zdHJ1Y3RvcihvKXtcclxuICAgICAgICB0aGlzLmxvY2F0aW9uID0gby5sb2NhdGlvbjtcclxuICAgICAgICB0aGlzLnZlbG9jaXR5ID0gby52ZWxvY2l0eTtcclxuICAgICAgICB0aGlzLmFjY2VsZXJhdGlvbiA9IG8uYWNjZWxlcmF0aW9uO1xyXG4gICAgICAgIHRoaXMubWFzcyA9IG8ubWFzcztcclxuICAgICAgICB0aGlzLnIgPSBvLnJhZGl1cztcclxuICAgICAgICB0aGlzLmxpZmVzcGFuID0gMTAwO1xyXG4gICAgICAgIHRoaXMuY29udCA9IDU7XHJcbiAgICAgICAgdGhpcy5kZWx0YSA9IE1hdGgucmFuZG9tKCk7XHJcbiAgICAgICAgdGhpcy50aGV0YSA9IE1hdGgucmFuZG9tKCk7XHJcbiAgICAgICAgdGhpcy5nYW1tYSA9IE1hdGgucmFuZG9tKCk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoKXtcclxuICAgICAgICBcclxuICAgICAgICAvKiBVcGRhdGUgZGF0YSAqL1xyXG4gICAgICAgIHRoaXMuY29udCArPSBNYXRoLnJhbmRvbSgpO1xyXG4gICAgICAgIHRoaXMuZGVsdGEgKz0gdGhpcy5jb250O1xyXG4gICAgICAgIHRoaXMudGhldGEgPSBNYXRoLnNpbihyYWQodGhpcy5kZWx0YSkpO1xyXG4gICAgICAgIHRoaXMuZ2FtbWEgPSBNYXRoLmNvcyhyYWQodGhpcy5kZWx0YSkpO1xyXG4gICAgICAgIHRoaXMubGlmZXNwYW4gLT0gMC4yO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8qIEFwcGx5IGZvcmNlcyAqL1xyXG4gICAgICAgIHRoaXMuYXBwbHlGb3JjZSh3aW5kKTtcclxuICAgICAgICB0aGlzLmFwcGx5Rm9yY2UobmV3IFZlY3RvcigwLGdyYXZpdHkueCp0aGlzLm1hc3MpKTtcclxuICAgICAgICAvLyB0aGlzLmFwcGx5RWRnZUZvcmNlcygpOyBOTyBGVU5DQSFcclxuXHJcbiAgICAgICAgLyogVXBkYXRlIGxvY2F0aW9uIGFuZCByZXNldCB2YWx1ZXMqL1xyXG4gICAgICAgIHRoaXMudmVsb2NpdHkuYWRkKHRoaXMuYWNjZWxlcmF0aW9uKTtcclxuICAgICAgICAvLyB0aGlzLnZlbG9jaXR5Lm11bHQoMC41KTtcclxuICAgICAgICAvLyB0aGlzLmNoZWNrRWRnZXMoKTtcclxuICAgICAgICB0aGlzLmxvY2F0aW9uLmFkZCh0aGlzLnZlbG9jaXR5KTtcclxuICAgICAgICB0aGlzLmFjY2VsZXJhdGlvbi5tdWx0KDApO1xyXG4gICAgfVxyXG4gICAgZGlzcGxheSgpe1xyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMjU1LDI1NSwyNTUsMC41KSc7XHJcbiAgICAgICAgY3R4LmFyYyh0aGlzLngsdGhpcy55LHRoaXMuciwwLE1hdGguUEkqMik7XHJcbiAgICAgICAgY3R4LmZpbGwoKTtcclxuICAgIH1cclxuICAgIGNoZWNrRWRnZXMoKXtcclxuICAgICAgICBpZiggdGhpcy5sb2NhdGlvbi54ID4gd2lkdGgpe1xyXG4gICAgICAgICAgICB0aGlzLmxvY2F0aW9uLnggPSB3aWR0aDtcclxuICAgICAgICAgICAgdGhpcy52ZWxvY2l0eS54ICo9IC0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLmxvY2F0aW9uLnkgPj0gaGVpZ2h0KXtcclxuICAgICAgICAgICAgdGhpcy5sb2NhdGlvbi55ID0gaGVpZ2h0O1xyXG4gICAgICAgICAgICB0aGlzLnZlbG9jaXR5LnkgKj0gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXBwbHlFZGdlRm9yY2VzKCl7XHJcbiAgICAgICAgdGhpcy5hcHBseUZvcmNlKGVkZ2Vzc1swXS5jbG9uZSgpLmRpdih0aGlzLmxvY2F0aW9uLnkpKTtcclxuICAgICAgICB0aGlzLmFwcGx5Rm9yY2UoZWRnZXNzWzFdLmNsb25lKCkuZGl2KHdpZHRoIC0gdGhpcy5sb2NhdGlvbi54KSk7XHJcbiAgICAgICAgdGhpcy5hcHBseUZvcmNlKGVkZ2Vzc1syXS5jbG9uZSgpLmRpdihoZWlnaHQgLSB0aGlzLmxvY2F0aW9uLnkpKTtcclxuICAgICAgICB0aGlzLmFwcGx5Rm9yY2UoZWRnZXNzWzNdLmNsb25lKCkuZGl2KHRoaXMubG9jYXRpb24ueCkpO1xyXG4gICAgfVxyXG4gICAgaXNEZWFkKCl7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmxpZmVzcGFuIDw9IDApO1xyXG4gICAgfVxyXG4gICAgcnVuKCl7XHJcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgIH1cclxuICAgIGFwcGx5Rm9yY2UoZm9yY2Upe1xyXG4gICAgICAgIGZvcmNlID0gbmV3IFZlY3Rvcihmb3JjZS54LGZvcmNlLnkpLmRpdih0aGlzLm1hc3MpO1xyXG4gICAgICAgIHRoaXMuYWNjZWxlcmF0aW9uLmFkZChmb3JjZSk7XHJcbiAgICB9XHJcbiAgICByZW1vdmUoKXtcclxuICAgICAgICBkZWxldGUgdGhpcztcclxuICAgIH1cclxuICAgIGdldCB4KCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYXRpb24ueDtcclxuICAgIH1cclxuICAgIGdldCB5KCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYXRpb24ueTtcclxuICAgIH1cclxufVxyXG5tb2R1bGUuZXhwb3J0cyA9IFBhcnRpY2xlOyIsImltcG9ydCBQYXJ0aWNsZSBmcm9tICcuL1BhcnRpY2xlLmpzJztcclxuaW1wb3J0IFNtb2tlUGFydGljbGUgZnJvbSAnLi9TbW9rZVBhcnRpY2xlLmpzJztcclxuaW1wb3J0IExpbmVQYXJ0aWNsZSBmcm9tICcuL0xpbmVQYXJ0aWNsZS5qcyc7XHJcbmltcG9ydCBQb2ludFBhcnRpY2UgZnJvbSAnLi9Qb2ludFBhcnRpY2xlLmpzJztcclxuXHJcbmNsYXNzIFBhcnRpY2xlU3lzdGVte1xyXG4gICAgY29uc3RydWN0b3Iob3JpZ2luLG1heEFtb3VudCx0eXBlKXtcclxuICAgICAgICB0aGlzLnBhcnRpY2xlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMub3JpZ2luID0gb3JpZ2luO1xyXG4gICAgICAgIHRoaXMuZmxhZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5tYXhBbW91bnQgPSBtYXhBbW91bnQgfHwgMTA7XHJcbiAgICAgICAgdGhpcy52ZWxvY2l0eSA9IG5ldyBWZWN0b3IoMSwxKTtcclxuICAgICAgICB0aGlzLmFjY2VsZXJhdGlvbiA9IG5ldyBWZWN0b3IoMCwwKTtcclxuICAgICAgICB0aGlzLmNvbnQgPSA1O1xyXG4gICAgICAgIHRoaXMuZGVsdGEgPSAwLjA7XHJcbiAgICAgICAgdGhpcy50aGV0YSA9IDAuMDtcclxuICAgICAgICB0aGlzLmdhbW1hID0gMC4wO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5wYXJ0aWNsZVR5cGVzID0ge1xyXG4gICAgICAgICAgICAncG9pbnQnOlBvaW50UGFydGljZSxcclxuICAgICAgICAgICAgJ2xpbmUnOiBMaW5lUGFydGljbGUsXHJcbiAgICAgICAgICAgICdzbW9rZSc6U21va2VQYXJ0aWNsZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5ydW4oKTtcclxuICAgIH1cclxuICAgIHJ1bigpe1xyXG4gICAgICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoKXtcclxuICAgICAgICAvLyB0aGlzLmRlbHRhICs9IHRoaXMuY29udDtcclxuICAgICAgICAvLyB0aGlzLnRoZXRhID0gTWF0aC5zaW4ocmFkKHRoaXMuZGVsdGEpKTtcclxuICAgICAgICAvLyB0aGlzLmdhbW1hID0gTWF0aC5jb3MocmFkKHRoaXMuZGVsdGEpKTtcclxuICAgICAgICAvLyB0aGlzLmFjY2VsZXJhdGlvbiA9IG5ldyBWZWN0b3IodGhpcy5nYW1tYSx0aGlzLnRoZXRhKTtcclxuICAgICAgICAvLyB0aGlzLnZlbG9jaXR5LmFkZCh0aGlzLmFjY2VsZXJhdGlvbik7XHJcbiAgICAgICAgLy8gdGhpcy5vcmlnaW4uYWRkKHRoaXMudmVsb2NpdHkpO1xyXG4gICAgICAgIC8vIHRoaXMudmVsb2NpdHkubXVsdCgwKTtcclxuICAgICAgICBpZih0aGlzLnBhcnRpY2xlcy5sZW5ndGggPD0gdGhpcy5tYXhBbW91bnQgJiYgdGhpcy5mbGFnKXtcclxuICAgICAgICAgICAgdGhpcy5wYXJ0aWNsZXMucHVzaChuZXcgdGhpcy5wYXJ0aWNsZVR5cGVzW3RoaXMudHlwZV0oe1xyXG4gICAgICAgICAgICAgICAgbG9jYXRpb246IHRoaXMub3JpZ2luLmNsb25lKCksXHJcbiAgICAgICAgICAgICAgICB2ZWxvY2l0eTogIG5ldyBWZWN0b3IobWFwKE1hdGgucmFuZG9tKCksMCwxLC0xLDEpLC0wLjAxKSxcclxuICAgICAgICAgICAgICAgIGFjY2VsZXJhdGlvbjogIG5ldyBWZWN0b3IobWFwKE1hdGgucmFuZG9tKCksMCwxLC0wLjAyLDAuMDEpLC0wLjAxKSxcclxuICAgICAgICAgICAgICAgIHJhZGl1czogTWF0aC5mbG9vcihtYXAoTWF0aC5yYW5kb20oKSwwLDEsMjAsNTApKVxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuZmxhZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBhcnRpY2xlcy5mb3JFYWNoKChwLGkpPT57XHJcbiAgICAgICAgICAgIGlmKHAuaXNEZWFkKCkpe1xyXG4gICAgICAgICAgICAgICAgcC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFydGljbGVzLnNwbGljZShpLDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBkaXNwbGF5KCl7XHJcbiAgICAgICAgdGhpcy5wYXJ0aWNsZXMuZm9yRWFjaCgocCxpKT0+e1xyXG4gICAgICAgICAgICBwLnJ1bigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlKCl7XHJcbiAgICAgICAgZGVsZXRlIHRoaXM7XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUGFydGljbGVTeXN0ZW07IiwiaW1wb3J0IFBhcnRpY2xlIGZyb20gJy4vUGFydGljbGUuanMnO1xyXG5jbGFzcyBQb2ludFBhcnRpY2xlIGV4dGVuZHMgUGFydGljbGV7XHJcbiAgICBjb25zdHJ1Y3RvcihvKXtcclxuICAgICAgICBzdXBlcihvKTtcclxuICAgICAgICB0aGlzLm1hc3MgPSAxMDtcclxuICAgIH1cclxuICAgIGRpc3BsYXkoKXtcclxuICAgICAgICBjdHguc2F2ZSgpO1xyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBcIndoaXRlXCI7XHJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGN0eC5hcmModGhpcy54LHRoaXMueSwxMCwwLE1hdGguUEkqMik7XHJcbiAgICAgICAgY3R4LmZpbGwoKTtcclxuICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgfVxyXG59XHJcbm1vZHVsZS5leHBvcnRzID0gUG9pbnRQYXJ0aWNsZTtcclxuIiwiaW1wb3J0IFBhcnRpY2xlIGZyb20gJy4vUGFydGljbGUuanMnO1xyXG5jbGFzcyBTbW9rZVBhcnRpY2xlIGV4dGVuZHMgUGFydGljbGV7XHJcbiAgICBjb25zdHJ1Y3RvcihvKXtcclxuICAgICAgICBzdXBlcihvKTtcclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5pbWdMb2FkZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNwcml0ZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgIHRoaXMuc3ByaXRlLm9ubG9hZCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHNlbGYuaW1nTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc3ByaXRlLnNyYyA9ICdpbWcvc21va2VfMjU2LnBuZyc7XHJcbiAgICB9XHJcbiAgICBkaXNwbGF5KCl7XHJcbiAgICAgICAgaWYoIXRoaXMuaW1nTG9hZGVkKSByZXR1cm47XHJcbiAgICAgICAgY3R4LnNhdmUoKTtcclxuICAgICAgICBjdHgudHJhbnNsYXRlKHRoaXMueC10aGlzLnIvMix0aGlzLnktdGhpcy5yLzIpO1xyXG4gICAgICAgIGN0eC5yb3RhdGUoKGZyYW1lQ291bnQqMC4wMDEpKk1hdGguUEkvMTgwKTtcclxuICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBtYXAodGhpcy5saWZlc3BhbiwwLDEwMCwwLDEpO1xyXG4gICAgICAgIGN0eC5kcmF3SW1hZ2UodGhpcy5zcHJpdGUsMCwwLHRoaXMucix0aGlzLnIpO1xyXG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICB9XHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSBTbW9rZVBhcnRpY2xlOyIsIi8vIEdMT0JBTFNcclxud2luZG93LmZyYW1lQ291bnQgPSAwO1xyXG5cclxuaW1wb3J0IFBhcnRpY2xlU3lzdGVtIGZyb20gJy4vUGFydGljbGVTeXN0ZW0uanMnO1xyXG5pbXBvcnQgJy4vdXRpbHMuanMnO1xyXG5cclxudmFyIHJlcUlkO1xyXG52YXIgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICBpbWcub25sb2FkID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICB9O1xyXG4gICAgaW1nLnNyYyA9ICdpbWcvc21va2VfMjU2LnBuZyc7XHJcbmZ1bmN0aW9uIHNldHVwKCl7XHJcbiAgICAvLyBjdHguZ2xvYmFsQ29tcG9zaXRlQmxlbmRpbmcgPSAnc2NyZWVuJztcclxuICAgIGxvb3AoKTtcclxufVxyXG5mdW5jdGlvbiB1cGRhdGUoKXtcclxuICAgICsrZnJhbWVDb3VudDtcclxufVxyXG5mdW5jdGlvbiByZW5kZXIoKXtcclxuICAgIGN0eC5jbGVhclJlY3QoMCwwLHdpZHRoLGhlaWdodCk7XHJcbiAgICBjdHguZHJhd0ltYWdlKGltZyxtb3VzZVgsbW91c2VZLDMwLDMwKTtcclxufVxyXG5cclxudmFyIGxhc3RDYWxsZWRGcmFtZSwgZnBzLCBkZWx0YTtcclxudmFyIGZwc0hUTUwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZwc1wiKTtcclxuZnVuY3Rpb24gbG9vcCgpe1xyXG4gICAgcmVxSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XHJcbiAgICB1cGRhdGUoKTtcclxuICAgIHJlbmRlcigpO1xyXG4gICAgaWYoIWxhc3RDYWxsZWRGcmFtZSl7XHJcbiAgICAgICAgbGFzdENhbGxlZEZyYW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgICBmcHMgPSAwO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGRlbHRhID0gKERhdGUubm93KCktbGFzdENhbGxlZEZyYW1lKS8xMDAwO1xyXG4gICAgZnBzID0gMS9kZWx0YSB8IDA7XHJcbiAgICBsYXN0Q2FsbGVkRnJhbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgaWYoZnJhbWVDb3VudCAlIDI0ID09PSAwKWZwc0hUTUwuaW5uZXJIVE1MID0gZnBzO1xyXG59XHJcbnNldHVwKCk7XHJcblxyXG4iLCJjbGFzcyBWZWN0b3J7XHJcbiAgICBjb25zdHJ1Y3Rvcih4LHkpe1xyXG4gICAgICAgIHRoaXMueCA9IHg7XHJcbiAgICAgICAgdGhpcy55ID0geTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBhZGQodmVjdG9yKXtcclxuICAgICAgICB0aGlzLnggKz0gdmVjdG9yLng7XHJcbiAgICAgICAgdGhpcy55ICs9IHZlY3Rvci55O1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc3ViKHZlY3Rvcil7XHJcbiAgICAgICAgdGhpcy54IC09IHZlY3Rvci54O1xyXG4gICAgICAgIHRoaXMueSAtPSB2ZWN0b3IueTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIG1hZygpe1xyXG4gICAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCp0aGlzLnggKyB0aGlzLnkqdGhpcy55KTtcclxuICAgIH1cclxuICAgIG11bHQobnVtKXtcclxuICAgICAgICB0aGlzLnggKj0gbnVtO1xyXG4gICAgICAgIHRoaXMueSAqPSBudW07XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBjbG9uZSgpe1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKHRoaXMueCx0aGlzLnkpO1xyXG4gICAgfVxyXG4gICAgZGl2KG51bSl7XHJcbiAgICAgICAgdGhpcy54ID0gdGhpcy54L251bTtcclxuICAgICAgICB0aGlzLnkgPSB0aGlzLnkvbnVtO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XHJcblxyXG53aW5kb3cuVmVjdG9yID0gVmVjdG9yO1xyXG53aW5kb3cuY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhcycpO1xyXG53aW5kb3cuY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcblxyXG53aW5kb3cub25yZXNpemUgPSBmdW5jdGlvbigpe1xyXG4gICAgY2FudmFzLndpZHRoID0gd2luZG93LndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICBjYW52YXMuaGVpZ2h0ID0gd2luZG93LmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxufTtcclxud2luZG93Lm9ucmVzaXplKCk7XHJcblxyXG53aW5kb3cuY29udCA9IDAuMDtcclxuXHJcbndpbmRvdy5yYWQgPSBmdW5jdGlvbihkZWcpe1xyXG4gICAgcmV0dXJuIGRlZyAqIE1hdGguUEkvMTgwO1xyXG59O1xyXG5cclxud2luZG93Lm1vdXNlWCA9IDA7XHJcbndpbmRvdy5tb3VzZVkgPSAwO1xyXG53aW5kb3cub25tb3VzZW1vdmUgPSBmdW5jdGlvbihldmVudCl7XHJcbiAgICBtb3VzZVggPSBldmVudC5jbGllbnRYO1xyXG4gICAgbW91c2VZID0gZXZlbnQuY2xpZW50WTtcclxufTtcclxud2luZG93Lm1hcCA9IGZ1bmN0aW9uKGEsYixjLGQsZil7cmV0dXJuIGQrKGYtZCkqKChhLWIpLyhjLWIpKX07XHJcblxyXG53aW5kb3cucmFuZG9tID0gZnVuY3Rpb24obWluLG1heCl7XHJcbiAgICByZXR1cm4gbWFwKE1hdGgucmFuZG9tKCksMCwxLG1pbixtYXgpO1xyXG59Il19"}